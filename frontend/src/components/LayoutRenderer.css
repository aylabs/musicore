/**
 * LayoutRenderer CSS
 * Feature 019 - Playback Note Highlighting
 * Feature 027 (T030/T031) - Orange highlight with glow for maximum contrast
 * 
 * Styles for music notation rendering and note highlighting during playback.
 */

/* Prevent OS context menu and text selection on the score SVG.
 * Long-press on the score is reserved for position-based playback seeking. */
.layout-renderer-svg {
  user-select: none;
  -webkit-user-select: none;
  /* iOS: suppress the system callout (copy/paste bubble on long press) */
  -webkit-touch-callout: none;
}

/* Prevent OS text-selection callout on any child of the score scroll container.
 * Applied to the outer container div so long-press on notes never triggers the
 * blue iOS selection handles or the Android text selection toolbar. */
.score-scroll-container,
.score-scroll-container * {
  user-select: none;
  -webkit-user-select: none;
  -webkit-touch-callout: none;
}

/* Highlighted glyph styling - Feature 019, Feature 027 */
/* T030: Changed from blue #4A90E2 to orange #FF8C00 (FR-012, SC-005) */
/* Applied to individual glyphs (text, line, rect elements) */
text.highlighted {
  fill: #FF8C00 !important;  /* Orange fill for highlighted noteheads */
}

line.highlighted {
  stroke: #CC6600 !important;  /* Dark orange stroke for highlighted stems */
  stroke-width: 2 !important;
}

rect.highlighted {
  fill: #FF8C00 !important;  /* Orange fill for highlighted beams */
}

polygon.highlighted {
  fill: #FF8C00 !important;  /* Orange fill for highlighted beam polygons */
}

/* Optional: Smooth transition for highlight appearance */
.glyph-run text,
.glyph-run line,
.glyph-run rect,
.glyph-run polygon {
  transition: fill 50ms ease-out, stroke 50ms ease-out;
}

/**
 * Feature 024: Generalized highlight class for CSS-class-based toggling.
 * Feature 027 (T030/T031): Orange #FF8C00 with drop-shadow glow for
 * maximum contrast against black notation at tablet viewing distance (SC-005).
 * Used by updateHighlights() rAF loop â€” avoids inline style manipulation.
 * Applied to any SVG element with data-note-id attribute.
 */
.layout-glyph.highlighted {
  fill: #FF8C00 !important;
  stroke: #FF8C00 !important;
  filter: drop-shadow(0 0 3px rgba(255, 100, 0, 0.8));
  transition: fill 50ms ease-out, stroke 50ms ease-out;
}
/**
 * Feature 027: Green highlight for long-press pinned position.
 * Declared AFTER .layout-glyph.highlighted so green wins when both classes
 * are present (CSS cascade: equal specificity + !important, last-declared wins).
 * updateHighlights() also skips adding .highlighted to already-pinned elements.
 */
.layout-glyph.pinned {
  fill: #00C853 !important;
  stroke: #00C853 !important;
  filter: drop-shadow(0 0 4px rgba(0, 180, 60, 0.8)) !important;
}